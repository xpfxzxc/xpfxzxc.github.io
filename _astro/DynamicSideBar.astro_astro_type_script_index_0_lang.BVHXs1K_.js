import"./navBarConfig.D8PtX1HU.js";import"./siteConfig.D4VXPo8I.js";const a={enable:!0,position:"left",components:[{type:"profile",enable:!0,order:1,position:"top",class:"onload-animation",animationDelay:0},{type:"announcement",enable:!0,order:2,position:"top",class:"onload-animation",animationDelay:50},{type:"categories",enable:!0,order:3,position:"sticky",class:"onload-animation",animationDelay:150,responsive:{collapseThreshold:5}},{type:"tags",enable:!0,order:5,position:"sticky",class:"onload-animation",animationDelay:250,responsive:{collapseThreshold:20}},{type:"advertisement",enable:!1,order:6,position:"sticky",class:"onload-animation",animationDelay:300,configId:"ad1"},{type:"advertisement",enable:!1,order:7,position:"sticky",class:"onload-animation",animationDelay:350,configId:"ad2"}],defaultAnimation:{enable:!0,baseDelay:0,increment:50},responsive:{breakpoints:{mobile:768,tablet:1024,desktop:1280},layout:{mobile:"sidebar",tablet:"sidebar",desktop:"sidebar"}}},r={profile:"../components/widget/Profile.astro",announcement:"../components/widget/Announcement.astro",categories:"../components/widget/Categories.astro",tags:"../components/widget/Tags.astro",toc:"../components/widget/TOC.astro",advertisement:"../components/widget/Advertisement.astro","music-player":"../components/widget/MusicPlayer.svelte",custom:null};class d{config;enabledComponents;constructor(e=a){this.config=e,this.enabledComponents=this.getEnabledComponents()}getConfig(){return this.config}getEnabledComponents(){return this.config.components.filter(e=>e.enable).sort((e,t)=>e.order-t.order)}getComponentsByPosition(e){return this.enabledComponents.filter(t=>t.position===e)}getAnimationDelay(e,t){return e.animationDelay!==void 0?e.animationDelay:this.config.defaultAnimation.enable?this.config.defaultAnimation.baseDelay+t*this.config.defaultAnimation.increment:0}getComponentClass(e,t){const n=[];return e.class&&n.push(e.class),e.responsive?.hidden&&e.responsive.hidden.forEach(i=>{switch(i){case"mobile":n.push("hidden","md:block");break;case"tablet":n.push("md:hidden","lg:block");break;case"desktop":n.push("lg:hidden");break}}),n.join(" ")}getComponentStyle(e,t){const n=[];e.style&&n.push(e.style);const i=this.getAnimationDelay(e,t);return i>0&&n.push(`animation-delay: ${i}ms`),n.join("; ")}isCollapsed(e,t){return e.responsive?.collapseThreshold?t>=e.responsive.collapseThreshold:!1}getComponentPath(e){return r[e]}shouldShowSidebar(e){return this.config.enable?this.config.responsive.layout[e]==="sidebar":!1}getBreakpoints(){return this.config.responsive.breakpoints}updateConfig(e){this.config={...this.config,...e},this.enabledComponents=this.getEnabledComponents()}addComponent(e){this.config.components.push(e),this.enabledComponents=this.getEnabledComponents()}removeComponent(e){this.config.components=this.config.components.filter(t=>t.type!==e),this.enabledComponents=this.getEnabledComponents()}toggleComponent(e,t){const n=this.config.components.find(i=>i.type===e);n&&(n.enable=t,this.enabledComponents=this.getEnabledComponents())}reorderComponent(e,t){const n=this.config.components.find(i=>i.type===e);n&&(n.order=t,this.enabledComponents=this.getEnabledComponents())}isSidebarComponent(e){return!0}}const s=new d;class l{sidebar;resizeObserver=null;constructor(){this.sidebar=document.getElementById("dynamic-sidebar"),this.init()}init(){this.sidebar&&(this.setupResponsiveDisplay(),this.setupResizeObserver(),this.setupWidgetInteractions(),this.applyInitialAnimations())}setupResponsiveDisplay(){this.updateResponsiveDisplay(),window.addEventListener("resize",()=>this.updateResponsiveDisplay())}updateResponsiveDisplay(){if(!this.sidebar)return;const e=s.getBreakpoints(),t=window.innerWidth;let n;t<e.mobile?n="mobile":t<e.tablet?n="tablet":n="desktop";const i=s.shouldShowSidebar(n);this.sidebar.style.setProperty(`--sidebar-${n}-display`,i?"block":"none"),this.sidebar.setAttribute("data-device-type",n)}setupResizeObserver(){!this.sidebar||!window.ResizeObserver||(this.resizeObserver=new ResizeObserver(e=>{for(const t of e){const{width:n,height:i}=t.contentRect;console.debug(`Sidebar size changed: ${n}x${i}`)}}),this.resizeObserver.observe(this.sidebar))}setupWidgetInteractions(){if(!this.sidebar)return;this.sidebar.querySelectorAll(".widget-container").forEach(t=>{const n=t.getAttribute("data-widget-type");t.addEventListener("mouseenter",()=>{t.classList.add("widget-hover")}),t.addEventListener("mouseleave",()=>{t.classList.remove("widget-hover")}),console.debug(`Widget ${n} interaction setup complete`)})}applyInitialAnimations(){if(!this.sidebar)return;this.sidebar.querySelectorAll(".widget-container").forEach((t,n)=>{const i=n*100;t.style.animationDelay=`${i}ms`})}destroy(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}}const p=new l;window.addEventListener("beforeunload",()=>{p.destroy()});
