import{o as $,i as ee,r as W,a as F}from"./props.WrJ9AHGX.js";import{q as M,v as te,f as A,k as ae,t as V,i as e,n as S,a as q,p as ie,b as ne,h as s,s as c,m as w,c as d,r as f,u as k,l as C}from"./utils.BZFIs17i.js";import{s as re}from"./render.BZAoEM4_.js";import{e as se,i as oe}from"./each.DLrycKnL.js";import{I as x,h as le}from"./Icon.Bs0XzUvZ.js";import{b as K}from"./input.C7hiyIry.js";import{I as N}from"./zh_TW.t-0bKPbw.js";import{i as U}from"./translation.8VncDh-1.js";import{u as Y}from"./url-utils.CfF70Dbo.js";/* empty css                        */import"./if.DSvGGf2i.js";import"./navBarConfig.BoFHndKS.js";function ce(a,u){if(!a||typeof a!="string"){console.warn("navigateToPage: Invalid URL provided");return}if(a.startsWith("http://")||a.startsWith("https://")||a.startsWith("//")){window.open(a,"_blank");return}if(a.startsWith("#")){const r=document.getElementById(a.slice(1));r&&r.scrollIntoView({behavior:"smooth"});return}if(typeof window<"u"&&window.swup)try{u?.replace||window.swup.navigate(a)}catch(r){console.error("Swup navigation failed:",r),j(a)}else j(a)}function j(a,u){window.location.href=a}var de=A(`<a class="transition first-of-type:mt-2 lg:first-of-type:mt-0 group block
       rounded-xl text-lg px-3 py-2 hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)]"><div class="transition text-90 inline-flex font-bold group-hover:text-[var(--primary)]"> <!></div> <div class="transition text-sm text-50"><!></div></a>`),fe=A(`<div id="search-bar" class="hidden lg:flex transition-all items-center h-11 mr-2 rounded-lg
      bg-black/[0.04] hover:bg-black/[0.06] focus-within:bg-black/[0.06]
      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10
"><!> <input class="transition-all pl-10 text-sm bg-transparent outline-0
         h-full w-40 active:w-60 focus:w-60 text-black/50 dark:text-white/50 svelte-15pne9z"/></div> <button aria-label="Search Panel" id="search-switch" class="btn-plain scale-animation lg:!hidden rounded-lg w-11 h-11 active:scale-90"><!></button> <div id="search-panel" class="float-panel float-panel-closed search-panel absolute md:w-[30rem]
top-20 left-4 md:left-[unset] right-4 shadow-2xl rounded-2xl p-2 svelte-15pne9z"><div id="search-bar-inside" class="flex relative lg:hidden transition-all items-center h-11 rounded-xl
      bg-black/[0.04] hover:bg-black/[0.06] focus-within:bg-black/[0.06]
      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10
  "><!> <input placeholder="Search" class="pl-10 absolute inset-0 text-sm bg-transparent outline-0
               focus:w-60 text-black/50 dark:text-white/50 svelte-15pne9z"/></div> <!></div>`,1);function Pe(a,u){ne(u,!1);let r=w(""),o=w(""),p=w([]),y=!1,l=w(!1);const pe=[{url:Y("/"),meta:{title:"This Is a Fake Search Result"},excerpt:"Because the search cannot work in the <mark>dev</mark> environment."},{url:Y("/"),meta:{title:"If You Want to Test the Search"},excerpt:"Try running <mark>npm build && npm preview</mark> instead."}],D=()=>{document.getElementById("search-panel")?.classList.toggle("float-panel-closed")},_=(t,i)=>{const n=document.getElementById("search-panel");!n||!i||(t?n.classList.remove("float-panel-closed"):n.classList.add("float-panel-closed"))},G=()=>{const t=document.getElementById("search-panel");t&&t.classList.add("float-panel-closed"),s(r,""),s(o,""),s(p,[])},H=(t,i)=>{t.preventDefault(),G(),ce(i)},h=async(t,i)=>{if(!t){_(!1,i),s(p,[]);return}if(e(l))try{let n=[];if(y&&window.pagefind){const m=await window.pagefind.search(t);n=await Promise.all(m.results.map(b=>b.data()))}else n=[],console.error("Pagefind is not available in production environment.");s(p,n),_(e(p).length>0,i)}catch(n){console.error("Search error:",n),s(p,[]),_(!1,i)}finally{}};$(()=>{const t=()=>{s(l,!0),y=typeof window<"u"&&!!window.pagefind&&typeof window.pagefind.search=="function",console.log("Pagefind status on init:",y),e(r)&&h(e(r),!0),e(o)&&h(e(o),!1)};document.addEventListener("pagefindready",()=>{console.log("Pagefind ready event received."),t()}),document.addEventListener("pagefindloaderror",()=>{console.warn("Pagefind load error event received. Search functionality will be limited."),t()}),setTimeout(()=>{e(l)||(console.log("Fallback: Initializing search after timeout."),t())},2e3)}),M(()=>(e(l),e(r)),()=>{e(l)&&e(r)&&(async()=>await h(e(r),!0))()}),M(()=>(e(l),e(o)),()=>{e(l)&&e(o)&&(async()=>await h(e(o),!1))()}),te(),ee();var L=fe(),I=ae(L),z=d(I);x(z,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var v=c(z,2);W(v),f(I);var g=c(I,2),J=d(g);x(J,{icon:"material-symbols:search",class:"text-[1.25rem]"}),f(g);var E=c(g,2),P=d(E),T=d(P);x(T,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var B=c(T,2);W(B),f(P);var O=c(P,2);se(O,1,()=>e(p),oe,(t,i)=>{var n=de(),m=d(n),b=d(m,!0),Q=c(b);x(Q,{icon:"fa6-solid:chevron-right",class:"transition text-[0.75rem] translate-x-1 my-auto text-[var(--primary)]"}),f(m);var R=c(m,2),X=d(R);le(X,()=>(e(i),k(()=>e(i).excerpt))),f(R),f(n),V(()=>{F(n,"href",(e(i),k(()=>e(i).url))),re(b,(e(i),k(()=>e(i).meta.title)))}),S("click",n,Z=>H(Z,e(i).url)),q(t,n)}),f(E),V(t=>F(v,"placeholder",t),[()=>(C(U),C(N),k(()=>U(N.search)))]),K(v,()=>e(r),t=>s(r,t)),S("focus",v,()=>h(e(r),!0)),S("click",g,D),K(B,()=>e(o),t=>s(o,t)),q(a,L),ie()}export{Pe as default};
